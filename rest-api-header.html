<link rel="import" href="../polymer/polymer.html">

<dom-module id="rest-api-header">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    <content></content>
  </template>
  <script>
    (function () {
      'use strict';

      Polymer({
        is: 'rest-api-header',

        hostAttributes: {
          hidden: true
        },

        properties: {
          key: String,
          type: {
            type: String,
            value: 'String',
            readOnly: true
          },
          values: Array,
          optional: Boolean,
          explanation: String,
          _observer: Object
        },

        attached: function () {
          this._observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
              this.explanation = this.innerText.trim();
            }.bind(this));
          }.bind(this));

          var config = {characterData: true, subtree: true};
          this._observer.observe(this, config);
          this.explanation = this.innerText.trim();
        },

        detached: function () {
          this._observer.disconnect();
        }

      });
    })();
  </script>
</dom-module>
